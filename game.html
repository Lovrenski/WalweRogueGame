<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<meta name="author" content="Quist Quest" />
	<meta name="keywords" content="Game, HTML5, HTML, CSS, JavaScript" />
	<meta name="description" content="Quist Quest - Defend the Knowledge" />
	<title>Quist Quest - Defend the Knowledge</title>
	<link rel="stylesheet" type="text/css" href="resources/css/game-ui.css" />
	<link rel="stylesheet" href="resources/css/animationContainerStyle.css">
	<link rel="stylesheet" href="resources/css/knight.css">
	<link rel="stylesheet" href="resources/css/slime.css">
	<link rel="stylesheet" href="resources/css/golem.css">
	<link rel="stylesheet" href="resources/css/jellyfish.css">
	<link rel="stylesheet" href="resources/css/skeleton.css">
	<link rel="stylesheet" href="resources/css/slimeBoss.css">
</head>

<body>
	<div class="game-container">
		<!-- Next level stat -->
		<!-- <div class="next-level-stat">
        <img
          src="./assets/games ui/Next Level.png"
          loading="lazy"
          alt="Next level stat"
        />
      </div> -->

		<!-- Game field -->
		<div class="game-field">
			<!-- Wave indicator -->
			<div class="wave-indicator">Wave 1</div>

			<div id="gameAnimationContainer">
				<div id="allyContainer">
					<div id="knight" data-animate="idle">
						<div class="idle"></div>
						<div class="walk"></div>
						<div class="attack"></div>
						<div class="damaged"></div>
						<div class="died"></div>
					</div>
				</div>
				<div id="enemyContainer" class="">
					<div id="slime" data-animate="">
						<div class="idle"></div>
						<div class="walk"></div>
						<div class="attack"></div>
						<div class="damaged"></div>
						<div class="died"></div>
					</div>
					<div id="golem" data-animate="">
						<div class="idle"></div>
						<div class="walk"></div>
						<div class="attack"></div>
						<div class="damaged"></div>
						<div class="died"></div>
					</div>
					<div id="jellyfish" data-animate="">
						<div class="idle"></div>
						<div class="walk"></div>
						<div class="attack"></div>
						<div class="damaged"></div>
						<div class="died"></div>
					</div>
					<div id="skeleton" data-animate="">
						<div class="idle"></div>
						<div class="walk"></div>
						<div class="attack"></div>
						<div class="damaged"></div>
						<div class="died"></div>
					</div>
					<div id="slimeBoss" data-animate="">
						<div class="idle"></div>
						<div class="walk"></div>
						<div class="attack"></div>
						<div class="damaged"></div>
						<div class="died"></div>
					</div>
				</div>
			</div>
			<!-- Player info -->
			<div class="player-info-container">
				<div class="player-avatar">
					<img src="" class="player-sprite" loading="lazy" alt="Knight" />
				</div>
				<div class="player-stats ui-box">
					<div class="player-name">Player</div>
					<div class="hp-bar">
						<div id="playerHpBar" class="hp-bar-fill" style="rotate: 180deg; left: 0;"></div>
						<div id="playerHpText" class="hp-text">100/100</div>
					</div>
				</div>
			</div>

			<!-- Enemy info -->
			<div class="enemy-info-container">
				<div class="enemy-stats ui-box">
					<div class="enemy-name">Slime</div>
					<div class="hp-bar">
						<div id="enemyHpBar" class="hp-bar-fill" style="right: 0;"></div>
						<div id="enemyHpText" class="hp-text">100/100</div>
					</div>
				</div>
				<div class="enemy-avatar">
					<img src="" class="enemy-sprite" loading="lazy" alt="Enemy
              " />
				</div>
			</div>

			<!-- Mana bar -->
			<!-- <div
            class="mana-bar"
            style="position: absolute; left: 20px; top: 110px"
            >
                <div class="mana-text">10/100</div>
            </div> -->

			<!-- Biome background -->
			<div class="biome-background"></div>
		</div>

		<div class="question-container">
			<div class="question">1+1=?</div>
			<!-- <div class="options-container">
                <div class="options">
                    <div class="option option-1">1</div>
                    <div class="option option-2">4</div>
                    <div class="option option-3">8</div>
                    <div class="option option-4">2</div>
                </div>
            </div> -->

			<div class="stats-container">
				<div class="correct-answer">
					<img src="./assets/games ui/BENAR!.png" loading="lazy" alt="Correct answer" />
				</div>
				<!-- <div class="wrong-answer">
            <img
              src="./assets/games ui/SALAH!.png"
              loading="lazy"
              alt="Wrong answer"
            />
          </div> -->
			</div>
		</div>
	</div>
	<button id="knightAtkBtn">knight attack</button>
	<button id="slimeAtkBtn">slime attack</button>
	<button id="golemAtkBtn">golem attack</button>
	<button id="jellyfishAtkBtn">jellyfish attack</button>
	<button id="skeletonAtkBtn">skeleton attack</button>
	<button id="slimeBossAtkBtn">slimeBoss attack</button>
	<button id="requestFullscreen">fullscreen</button>

	<script type="text/Javascript" src="resources/javascript/game-ui.js"></script>
	<script>
		function delay(ms) {
			return new Promise((resolve) => setTimeout(resolve, ms));
		}
		document.addEventListener("DOMContentLoaded", function () {
			let $allyContainer = document.getElementById("allyContainer");
			let $knight = document.getElementById("knight");
			async function animateKnightAttack(enemyElement) {
				$allyContainer.classList.add("move", "z-100");
				$knight.dataset.animate = "walk";
				await delay(700);
				$knight.dataset.animate = "idle";
				await delay(100);
				$knight.dataset.animate = "attack";
				await delay(200);
				enemyElement.dataset.animate = "damaged";
				await delay(300);
				enemyElement.dataset.animate = "idle";
				$knight.dataset.animate = "walk";
				$allyContainer.classList.replace("move", "move-back");
				await delay(700);
				$knight.dataset.animate = "idle";
				$allyContainer.classList.remove("move-back", "z-100");
			}

			let $enemyContainer = document.getElementById("enemyContainer");
			let $slime = document.getElementById("slime");

			async function animateSlimeAttack() {
				$enemyContainer.classList.add("move-slime");
				$slime.dataset.animate = "walk";
				await delay(1400);
				$slime.dataset.animate = "idle";
				await delay(200);
				$slime.dataset.animate = "attack";
				await delay(210);
				$knight.dataset.animate = "damaged";
				await delay(280);
				$slime.dataset.animate = "idle";
				$knight.dataset.animate = "idle";
				await delay(100);
				$enemyContainer.classList.replace("move-slime", "move-back-slime");
				$slime.dataset.animate = "walk_fliped";
				await delay(1700);
				$slime.dataset.animate = "idle";
				$enemyContainer.classList.remove("move-back-slime");
			}

			let $golem = document.getElementById("golem");

			async function animateGolemAttack() {
				$enemyContainer.classList.add("move-golem");
				$golem.dataset.animate = "walk";
				await delay(1030);
				$golem.dataset.animate = "idle";
				await delay(200);
				$enemyContainer.classList.replace("move-golem", "move-golem-attack");
				$golem.dataset.animate = "attack";
				await delay(900);
				$knight.dataset.animate = "damaged";
				await delay(200);
				$knight.dataset.animate = "idle";
				$golem.dataset.animate = "idle";
				await delay(300);
				$golem.dataset.animate = "walk_fliped";
				$enemyContainer.classList.replace(
					"move-golem-attack",
					"move-back-golem"
				);
				await delay(1200);
				$enemyContainer.classList.remove("move-back-golem");
				$golem.dataset.animate = "idle";
			}

			let $jellyfish = document.getElementById("jellyfish");

			async function animateJellyfishAttack() {
				$jellyfish.dataset.animate = "walk";
				$enemyContainer.classList.add("move-jellyfish");
				await delay(1600);
				$jellyfish.dataset.animate = "idle";
				await delay(200);
				$jellyfish.dataset.animate = "attack";
				await delay(200);
				$knight.dataset.animate = "shocked";
				await delay(800);
				$jellyfish.dataset.animate = "idle";
				$knight.dataset.animate = "idle";
				await delay(200);
				$jellyfish.dataset.animate = "walk-back";
				$enemyContainer.classList.replace(
					"move-jellyfish",
					"move-back-jellyfish"
				);
				await delay(1500);
				$jellyfish.dataset.animate = "idle";
				$enemyContainer.classList.remove("move-back-jellyfish");
			}

			let $skeleton = document.getElementById("skeleton");

			async function animateSkeletonAttack() {
				$skeleton.dataset.animate = "walk";
				$enemyContainer.classList.add("move-skeleton");
				await delay(1000);
				$skeleton.dataset.animate = "idle";
				await delay(200);
				$skeleton.dataset.animate = "attack";
				await delay(160);
				$knight.dataset.animate = "damaged";
				await delay(110);
				$skeleton.dataset.animate = "idle";
				await delay(90);
				$knight.dataset.animate = "idle";
				await delay(200);
				$skeleton.dataset.animate = "walk_fliped";
				$enemyContainer.classList.replace(
					"move-skeleton",
					"move-back-skeleton"
				);
				await delay(1000);
				$skeleton.dataset.animate = "idle";
				$enemyContainer.classList.remove("move-back-skeleton");
			}

			let $slimeBoss = document.getElementById("slimeBoss");

			async function animateSlimeBossAttack() {
				$slimeBoss.dataset.animate = "attack";
				$enemyContainer.classList.add("move-slimeBoss");
				await delay(1800);
				$knight.dataset.animate = "damaged";
				await delay(200);
				$knight.dataset.animate = "idle";
				$slimeBoss.dataset.animate = "idle";
				await delay(200);
				$slimeBoss.dataset.animate = "jump-back";
				$enemyContainer.classList.replace(
					"move-slimeBoss",
					"move-back-slimeBoss"
				);
				await delay(2000);
				$slimeBoss.dataset.animate = "idle";
				$enemyContainer.classList.remove("move-back-slimeBoss");
			}

			document.getElementById("knightAtkBtn").addEventListener("click", function () {
				animateKnightAttack(document.querySelector('#enemyContainer>[data-animate="idle"]'));
			});
			document.getElementById("slimeAtkBtn").addEventListener("click", function () {
				animateSlimeAttack();
			});
			document.getElementById("golemAtkBtn").addEventListener("click", function () {
				animateGolemAttack();
			});
			document.getElementById("jellyfishAtkBtn").addEventListener("click", function () {
				animateJellyfishAttack();
			});
			document.getElementById("skeletonAtkBtn").addEventListener("click", function () {
				animateSkeletonAttack();
			});
			document.getElementById("slimeBossAtkBtn").addEventListener("click", function () {
				animateSlimeBossAttack();
			});

			// let $fullscreenDiv = document.getElementById("fullscreen");
			// let $game = document.getElementById("game");
			// document.getElementById("requestFullscreen").addEventListener("click", function () {
			// 	$fullscreenDiv.requestFullscreen();
			// 	$fullscreenDiv.classList.add("on");
			// 	setTimeout(() => {
			// 		const scale = Math.min(
			// 			$fullscreenDiv.offsetWidth / 1280,
			// 			$fullscreenDiv.offsetHeight / 720
			// 		);
			// 		$game.style.scale = scale;
			// 	}, 50);
			// });
			// document.addEventListener("fullscreenchange", () => {
			// 	if (!document.fullscreenElement) {
			// 		$fullscreenDiv.classList.remove("on");
			// 		$game.style.scale = 1;
			// 	}
			// });


			let $playerHpBar = document.getElementById('playerHpBar');
			let $playerHptext = document.getElementById('playerHpText');
			function changePlayerHpBar($maxHp, $currentHp) {
				$percent = ($currentHp / $maxHp) * 100;
				$playerHpBar.style.width = $percent + '%';
				$playerHptext.innerText = $currentHp + '/' + $maxHp;
			}
			let $enemyHpBar = document.getElementById('enemyHpBar');
			let $enemyHptext = document.getElementById('enemyHpText');
			function changeEnemyHpBar($maxHp, $currentHp) {
				$percent = ($currentHp / $maxHp) * 100;
				$enemyHpBar.style.width = $percent + '%';
				$enemyHptext.innerText = $currentHp + '/' + $maxHp;
			}

			changePlayerHpBar(10, 5);
			changeEnemyHpBar(10, 2);
		});
	</script>
</body>

</html>